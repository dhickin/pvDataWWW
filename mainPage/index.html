<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html" />
  <meta http-equiv="PRAGMA" content="NO-CACHE"/>
  <meta http-equiv="EXPIRES" content="0"/>
  <title>EPICS Version 4 Home Page</title>
  <link rel="stylesheet" type="text/css" href="base.css" />
  <link rel="stylesheet" type="text/css" href="epicsv4web.css" />
  <link href="https://plus.google.com/114828842338418222242" rel="publisher" />
  <style type="text/css">
   @media print {
     body { margin-right: 1%;
            font-size: smaller
     }
   }
   @media screen {
     body { margin: 1em 2em 2em 2em }
   }
   
   h4, h5, blockquote { margin-left: 1em }
   
   </style>
</head>


<body>
<div width="100%" style="font-size:70%;text-align:right;">
<!-- hhmts start -->Last modified: Fri Jan 17 10:19:27 PST 2014 <!-- hhmts end -->
</div>
<table width="100%" style="border-width:1px">
  <tr>
    <td style="padding:4px">
      <table id="logo" style="border-width:0px" class="image">
	<caption
	style="text-align:center;letter-spacing:1.0em;font-size:70%;
	    font-weight:lighter;margin-left:1.0em;white-space:nowrap"
	align="top">EPICS V4
	</caption>
	<tr>
	  <td><img align="left" src="image/logos/EV4logo_blue_sanstext_lg.png"
	    alt="EPICS V4 logo"/>
	  </td>
	</tr>
      </table>
    </td>
    <td width="100%"
      style=
      "text-align:center;letter-spacing:0.2em;font-size:350%;color:#4C3BCA">EPICS
      Version 4
    </td>
    <td padding="0px" border-width="0px"></td>
  </tr>

</table>

<table class="masthead" vspace="4px" width="100%" style="font-weight:bold">
  <tbody align="center">
    <tr>
      <!-- #005a9c rgb(0,128,255); -->
      <td align="center" class="selected">
	<span class="selectedtab" >HOME</span>
      </td>
      <td align="center"><a href="development.html">DEVELOPMENT</a></td>
      <td align="center"><a
	href="https://sourceforge.net/projects/epics-pvdata/files/">DOWNLOAD</a></td>
      <td align="center"><a href="literature.html">DOCUMENTATION</a></td>
      <td align="center"><a href="features.html">FEATURES</a></td>
      <td align="center"><a href="home.html">WORKING GROUP</a></td>
      <td align="center" ><a href="http://sourceforge.net/projects/epics-pvdata">SOURCEFORGE PROJECT</a></td>      
      <td align="center"><a href="https://docs.google.com/spreadsheet/pub?key=0AiY7lwlw4Y4XdDNBVzRUN0FOMGw1Ty1pZk9MeGtPVnc&output=html">DASHBOARD</a></td>
   </tr>
   </tbody>
</table>

<p style="margin-top:30px">
This is the homepage of EPICS Version 4, a software toolkit for writing the control
system and online scientific services of large experimental facilities.</p>

<p>EPICS Version 4 immensely improves the richness and speed of the data interaction between
the client and control side of EPICS control systems. Programmers now have facilities to
intelligently expose the controls system Process Variables of interest in the ways
users want to see them. Clients can easily find out, while they are running, which
are the pertinent IOC data relevant for their particular applications. Data
processing services can be trivially set up to pre-process data between the DAQ and
clients. Version 4
also easily integrates EPICS with the other data systems that can be expected in
scientific enterprises, such as mathematical modelling systems, data archiving
systems, logging systems, and cabling and instrument calibration data in enterprise
databases. </p>

<p><a href="http://www.aps.anl.gov/epics">EPICS</a> is a set of Open Source
software tools, libraries and applications developed collaboratively and used
worldwide to create distributed soft real-time control systems for scientific
instruments such as a particle accelerators, telescopes and other large
scientific experiments. </p>

<!-- This hr style could be used as a seperator
style="width:90%;height:1px;border-width:0;color:gray;background-color:gray"/ -->

<table class="content" width="100%">
  <tr> <!-- Row with quicklinks and Operating Points-->
    <td class="content" align="left" valign="top" 
        style="width:11em; background-color:rgb(245,245,245); padding:4px"> <!-- Column of quicklinks-->

      <ul class="quicklinks_outer">
	<li>SEARCH EPICS Version 4</li>
	  <form name="google-search" method="get" action="http://www.google.com/search">
	    <div style="border:1px;padding:4px;font-size:90%;width=20em">
	      <input type="hidden" name="sitesearch" value="http://epics-pvdata.sourceforge.net" />
	      <input name="q" type="text" size="28" style="font-size:90%" maxlength="255" />
	      <input type="submit" name="sa" style="margin-top:0.5em;font-size:90%" value="Google" />
	    </div>
	  </form>
	</li>
      </ul>   
       
      <ul  class="quicklinks_outer">
	<li>HOME</li>
	<ul class="quicklinks_inner">
	  <li><a 
	  href="#whatdoesitbring">What is Version 4?</a></li>
	  <li><a 
	  href="#nutshell">In a Nutshell</a></li>
	  <li><a href="#interop" >V4/Base Interoperation</a></li>
	  <li><a href="#perf" >Performance</a></li>
	</ul>
      </ul>

     
      <ul class="quicklinks_outer">
	<li><a href="development.html">DEVELOPMENT</a></li>
	<ul class="quicklinks_inner">
	  <li><a href="gettingStarted.html">Getting Started</a></li>
	  <li><a
	  href="http://sourceforge.net/projects/epics-pvdata/files/">Download</a></li>
	  <li><a 
	  href="http://sourceforge.net/projects/epics-pvdata/support">Support</a></li>
	  <li><a href="development.html#pvdata">pvData</a></li>
	  <li><a href="development.html#pvaccess">pvAccess</a></li>
	  <li><a
	href="http://sourceforge.net/p/epics-pvdata/_list/hg">Mercurial
	Repos</a></li>
	<li><a
	href="http://epics.sourceforge.net/maven2/epics/">Maven Products</a></li>
	<li><a href="https://openepics.ci.cloudbees.com/view/EPICS%20V4/"
	>Cloudbees Builds</a></li>
	<li><a
href="http://sourceforge.net/p/epics-pvdata/pvDataWWW/ci/default/tree/scripts/RELEASE_VERSIONS"
	>RELEASE VERSIONS</a></li>
	<li><a href="Ev4buildtracker.xls" >Compatibility Tracker (Excel)</a></li>
	</ul>
      </ul>

      <ul  class="quicklinks_outer">
	<li><a
	href="https://sourceforge.net/projects/epics-pvdata/files/">DOWNLOAD</a></li>
      </ul>

      <ul class="quicklinks_outer">
	<li><a href="literature.html">DOCUMENTATION</a></li>
	<ul class="quicklinks_inner">
	  <li><a href="literature.html#swdoc">Programmers Reference</a></li>
	  <li><a href="literature.html#normativedocs">pvAccess
	  Specification</a></li>
	  <li><a
	  href="literature.html#normativedocs">Normative
	  Types</a></li>
	  <li><a
	  href="literature.html#informativedocs">Architectures</a></li>
	  <li><a href="literature.html#internal">Internal Documents</a></li>
	  <li><a href="literature.html#talks">Talks and Papers</a></li>
	</ul>
      </ul>

      <ul class="quicklinks_outer">
	<li><a href="features.html">FEATURES</a></li>
	<ul class="quicklinks_inner">
	  <li><a href="features.html#features">Feature List</a></li>
	  <li><a href="features.html#solutions">Solutions</a></li>
	</ul>
      </ul>
      
      <ul class="quicklinks_outer">
	<li><a href="home.html">WORKING GROUP</a></li>
	<ul class="quicklinks_inner">
	  <li><a href="home.html#status">Activities</a></li>
	  <li><a href="https://docs.google.com/spreadsheet/pub?key=0AiY7lwlw4Y4XdDNBVzRUN0FOMGw1Ty1pZk9MeGtPVnc&output=html">Dashboard</a></li>
	  <li><a href="home.html#meetings">Meetings</a></li>
	  <li><a href="home.html#usefulinfo">Meeting Info</a></li>
	  <li><a href="home.html#membership">Membership</a></li>
	  <li><a 
	  href="http://sourceforge.net/mailarchive/forum.php?forum_name=epics-pvdata-devel">Mail
	  Archive</a></li>
	  <li><a
	  href="https://sourceforge.net/tracker/?group_id=249167&atid=2482257">Action
	  Items</a>
	  </li>
	  <li><a
	  href="https://sourceforge.net/tracker/?group_id=249167&atid=2483551">Issues</a></li>
	  <li><a
	  href="https://sourceforge.net/tracker/?group_id=249167&atid=2585448">Bugs</a>
	  </li>
	  <li><a href="https://sourceforge.net/tracker/?group_id=249167&atid=2483530">Resolutions</a></li>
	</ul>
      </ul>
      
      <ul class="quicklinks_outer">
	<li><a
	href="http://sourceforge.net/projects/epics-pvdata/">EPICS V4
	SOURCEFORGE</a></li>
      </ul>
  
      <!-- <ul  class="quicklinks_outer">
	<li><a
  href="FAQ.html">FAQ</a></li>
      </ul> -->

      <ul class="quicklinks_outer">
	<li><a href="charter.html">CHARTER</a></li>
	<ul class="quicklinks_inner">
	  <li><a href="charter.html#scope">Goals</a></li>
	  <li><a href="charter.html#deliverables">Deliverables</a></li>
	  <li><a href="charter.html#milestones">Milestones</a></li>
	</ul>
      </ul>

       <ul class="quicklinks_outer">
	 <li><a href="http://www.aps.anl.gov/epics/">EPICS</a></li>
	 <ul class="quicklinks_inner">
	   <li><a href="http://www.aps.anl.gov/epics/download/base/index.php">Base
	   Downloads</a></li>
	   <li><a
	 href="	http://www.aps.anl.gov/epics/tech-talk/index.php">Tech-talk forum</a></li>
	 </ul>
       </ul>

    </td> <!-- End Quicklinks column -->
     <td valign="top">  <!-- Main Material Column -->      
     
<h2 class="first" id="whatdoesitbring">What's new in EPICS V4.3</h2>
       
       <p> V4.3 greatly simplifies the relationship of the classic EPICS version 3
and version 4. Now, EPICS version 3 base is simply that component of version 4 that
implements the IOC, together with its control database and communications over
channel access. The support for high performance data services has also been greatly
simplified - there is no longer a need to run any form of IOC nor SoftIOC - just tell a
pvServer what PVs it should respond to, and go.  </p>

<p>For more of the features of EPICS V4, see <a href="features.html">Features and Use
Cases</a>.</p>
     
<h2 id="nutshell">EPICS Version 4 Components in a Nutshell</h2>
<p>EPICS Version 4 is composed of four primary modules: EPICS Base, pvData, pvAccess and pvaSrv. EPICS Base (V3.14) provides the IOC (Input/Output Controller), which is a network node
that controls and/or monitors a collection of devices. An IOC contains a memory
resident real time database. The real time database has a set of "smart" records,
which are interconnected in a <a href="http://en.wikipedia.org/wiki/Dataflow" > Data
Flow</a> pattern. The records may contain "device support" code, to interface the processing model to physical devices through device drivers. pvAccess is a communications protocol for connecting clients to servers. One such server may be an IOC, though simpler servers are also supported, such as for Remote Procedure Calls (how cloud and Service Oriented Architecture is implemented in EPICS). The module which intermediates pvAccess to the record processing on an IOC is pvaSrv. pvData is the application level data interface of EPICS V4. pvData objects are transported by pvAccess to an IOC, or to other pvAccess servers.</p>
       

<h2 id="interop">Version 4 / Base 3.14 Interoperation</h2>

<p>EPICS Base 3.14 includes a communications protocol named "Channel Access". Version
4 adds a new protocol called "pvAccess". Interoperability between the two protocols,
their APIs, and record processing, is provided in Version 4.3, in 2 ways:</p>
<ul>
  <li>The pvAccess client system includes Channel Access as a protocol
  "provider". The other protocol provider is pvAccess. That way, a single client
  library and API gives communications on both protocols</li>
  <li>A new IOC module, pvaSrv, interfaces pvAccess protocol wire I/O, to an IOC's
  regular CA and database processing.</li>
</ul>

<table id="interopdiag"  width="100%" style="border-width:0px">
  <caption style="text-align:center;font-size:70%;font-style:italic"
  align="bottom">Interoperation of classic EPICS and V4 endpoints, is provided by the
  pvaSrv IOC module, and that pvAccess clients can optionally communicate using Channel Access.
  </caption>
  <tr>
    <td align="center"><img src="image/Interop-9a50pc.png" alt="EPICS V3/V4 interoperation diagram"/>
    </td>
  </tr>
</table>

<p>See the talks <a href="http://www.epics2013.org/dms/EPICS2013/presentations/wednesday/Session_3/V4_Lange_pvaSrv.pdf">pvaSrv
- the IOC Side Bridge from pvAccess to an IOC</a> (PDF), Ralph Lange, and <a
 href="talks/2012/V3V4Interoperatibility.ppt" >V3/V4 Interoperability</a> (PPT), Marty
Kraimer.</p>

<h2 id="perf">Performance</h2>

<p>Very preliminary performance graphs for pvAccess floating point acquisitions are
given below, together with comparable Channel Access acquisition. The setup is C++
clients and servers, of the Beta 1.0.1 release (as on the downloads page), 2 MacBook
Pros (~2GHz Intel Core Duo-s, 4GB memory) with a 1 GBit Ethernet point-to-point
connection. The acquisition is a GET operation, on a double array value (DBR_DOUBLE
and pvAccess equivalent), varying in both cases the value array size. Note that in
addition to raw network encoding and deserializing performance, in a real world
implementation pvAccess could achieve much higher apparent performance since it
additionally has the capability to transfer only actually changed structure field values. </p>

<table id="perf1chan"  width="100%" style="border-width:0px">
  <caption style="text-align:center;font-size:70%;font-style:italic;margin:1em 6em
  0em 6em" align="bottom">
  pvAccess and Channel Access comparative performance (Number of
  channel value get operations per second), where only one channel's value is got 
  in each get operation, as a function of array size of the
  channel. The graph shows that roughly speaking, pvAccess does better than Channel
  Access with increasing channel value array size.   
  </caption>
  <tr>
    <td align="center"><img src="image/perf/pvAccessPerf_1ChanOfDiffSizes_gets_per_s.png"
      alt="EPICS V4 pvAccess performance diagram"/>
    </td>
  </tr>
</table>

<table id="perf1000chan"  width="100%" style="border-width:0px;margin:2em 0em 0em 0em">
  <caption style="text-align:center;font-size:70%;font-style:italic;margin:1em 6em
  0em 6em" align="bottom">
  pvAccess and Channel Access comparative performance (Number of
  channel value get operations per second), where 1000 channels values' are got 
  in each get operation, as a function of array size of the
  channel. The graph shows that roughly speaking, Channel
  Access does better than pvAccess with small messages, whereas pvAccess does better
  than CA for large array sizes.  
  </caption>
   <tr>
    <td align="center"><img src="image/perf/pvAccessPerf_1000Chan_vs_ChanSize.png"
      alt="EPICS V3/V4 interoperation diagram"/>
    </td>
  </tr>
</table>

      

<h3>Present Deployments</h3>
<p>EPICS V4 is also being used now developing beamline image data acquisition and
storage, using the facilities of pvData for structured data. Contact Dave Hickin at
DIAMOND. It will shortly also be deployed at PSI for back end SQL database access. </p>


<h3 id="nonnormative">Extensions, Tools, and Associated Activities</h3>

<p>A number of software projects are associated with EPICS V4. Some of the above are
in scope of the EPICS Version 4 working group specifically, and others not. Those in
scope are being managed as part of
the <a href="charter.html#deliverables">deliverables of the group</a>, though they
are not considered <a href="charter.html#normativedocs">normative</a>, and should not be
considered all at the same level of release as the normative specifications (Beta at
the time of writing).</p>

<dl class="normativeproddescr">
  <dt id="pvmanager">pvManager</dt>
  <dd>PVManager is a client side utility library, that helps to manage complex
    objects' retrieval and scanning. It allows client programs of EPICS V4 or EPICS
    V3, to decouple the rate of events on the network from the rate of refresh needed
    by the user interface itself. It provides a clean, simple, well designed high
    level programming interface for the problem of multi-threaded GUI acquisition and
    screen update of many EPICS record data, for instance, a table of Beam Position
    Monitor (BPM) data of many BPMs.
  </dd>
  <dd><strong>Homepage:</strong> <a href="http://pvmanager.sourceforge.net/">http://pvmanager.sourceforge.net/</a></dd>
  <dd><strong>Literature: </strong><a href="http://pvmanager.sourceforge.net/apidocs/org/epics/pvmanager/package-summary.html#contents">User guide</a>. <a href="http://pvmanager.sourceforge.net/apidocs/">Reference documentation (javadoc)</a>.See also <a href="#literature">literature</a> below</dd>
  <dd><strong>Status:</strong> 1.0 released on 22 Sept 2011. Production/Stable. Bundled in CSS Core as of 3.0.0 (31 May 2011). Used in some CSS applications and BOY Widgets (Waterfall, PVTable by Property, PVManager probe, ...).</dd><dd><strong>Contact:</strong> Ralph Lange (HZB), Gabriele Carcassi (BNL).</dd>
</dl>

<dl class="normativeproddescr">
  <dt id="channelfinder">Channel- Finder</dt>
  <dd>ChannelFinder is a toolkit for building directory services suitable for EPICS
  channel metadata.</dd>
  <dd><strong>Homepage:</strong> <a href="http://sourceforge.net/projects/channelfinder/">http://sourceforge.net/projects/channelfinder</a></dd>
  <dd><strong>Literature: </strong><a href="http://channelfinder.sourceforge.net/ChannelFinder/">Home page of Web Service component</a>, includes Design and service data update API descriptions. 
    <a href="http://channelfinder.sourceforge.net/ChannelFinderAPI/">Client side java API.</a> </dd>
  <dd><strong>Status:</strong> Usable beta</dd>
  <dd><strong>Contact:</strong> Gabriele Carcassi (BNL),  Ralph Lange (HZB), Kunal Shroff (BNL)</dd>
</dl>

<dl class="normativeproddescr">
  <dt id="pythoninterface">python interfaces</dt>
  <dd>Python wrappers for pvData, pvAccess and pvService are being worked on.  </dd>
   <dd><strong>Status:</strong> Early beta</dd>
  <dd><strong>Contact:</strong> Guobao Shen (BNL)</dd>
</dl>

</td>
</tr>
</table>
<hr>
<address>Greg White, SLAC/PSI greg at slac.stanford.edu, for EPICS V4 Working Group</address>

</body>
</html>
