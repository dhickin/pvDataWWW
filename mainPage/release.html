<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
 <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
 <meta http-equiv="PRAGMA" content="NO-CACHE" />
 <meta http-equiv="EXPIRES" content="0" />
 <meta name="keywords" content="EPICS, EPICSv4, release process" />
 <title>EPICS Version 4 Release Guide</title>
 <!-- Include the epicsv4 base.css, and the css for epics v4 documents -->
 <link rel="stylesheet" type="text/css" href="base.css" />
 <link rel="stylesheet" type="text/css" href="epicsv4.css" />
 <style type="text/css">/*<![CDATA[*/
   ul.close li { margin-bottom: 0.1em; }
   table.left { margin-left: 2em; }
   /*]]>*/</style>
 <script type="text/javascript" src="script/tocgen.js">
   </script>
</head>
<body>

<div class="head">
<h1>EPICS Version 4 Release Guide</h1>

<h2 class="nocount">Working Group draft for version 4.3.0</h2>

<dl>
<dt>Author:</dt>
  <dd>Andrew Johnson</dd>
<dt>Date:</dt>
  <dd>3 July 2013</dd>
<dt>Latest version:</dt>
  <dd><a href="release.html">release.html</a></dd>
<dt>Older versions:</dt>
  <!-- Add versions for each release here.
  <dd><a href="release_4.3.0.html">release_4.3.0.html</a></dd> -->
  <dd><a href="release_20130111.html">release_20130111.html</a></dd>
</dl>

<hr />
</div>


<h2 class="nocount">Abstract</h2>

<p>This is an EPICS v4 working group internal document giving the policies and
procedures for releasing numbered versions of EPICS v4 software modules. It also
contains a check-list for use by the Release Coordinator during the process of
creating a new version of the software.</p>

<div id="toc">
<h2 class="nocount" style="page-break-before: always">Table of Contents</h2>
</div>


<div id="contents" class="contents">

<h2>Introduction</h2>

<p>This document defines the policies that apply to the release of all EPICS v4
software modules released by the EPICS v4 Working Group, and the procedures that
are to be followed when creating official releases of those modules.</p>

<h3>Applicability</h3>

<p>The policies described here have been developed for and agreed by the EPICS
v4 Working Group, and apply to all core software modules developed for and
formally published by the group.</p>

<p>The procedures documented here SHOULD be followed anyone involved in making
officially numbered releases of the EPICS v4 software modules.</p>


<h2>Release Numbering</h2>

<p>All core EPICS v4 modules are currently being packaged together and released
with the same version number at the same time. The mercurial repositories of
individual modules should all be tagged with the communal version number at the
time of release. However bug-fix releases of individual modules should be able
to be made independently of other modules without following the full process
described in this document. <span class="ed">To Do: Develop a quicker process
for bug-fix releases of individual modules.</span></p>

<p>The group may also publish non-core software modules such as the pvaSrv
module and various example programs. These are not required to match the common
version number of the core software, but should still follow the numbering
format and policies given below.</p>


<h3>Version numbers</h3>

<p>A version number should always take one of the following forms:</p>

<pre>4.<i>major</i>.<i>minor</i>
4.<i>major</i>.<i>minor</i>-<i>suffix</i>
4.<i>major</i>.<i>minor</i>.<i>bugfix</i>
4.<i>major</i>.<i>minor</i>.<i>bugfix</i>-<i>suffix</i></pre>

<ul>
<li>The first number will always be <code>4</code>.</li>

<li>The second number <code><i>major</i></code> increments at every major
release.</li>

<li>The third number <code><i>minor</i></code> increments at every minor
release, and is reset to zero whenever the major number changes.</li>

<li>The fourth number <code><i>bugfix</i></code> increments at every bug-fix
release, and is reset to zero whenever the minor number changes. This number and
its leading dot do not usually appear in the full version number when the number
is zero.</li>

<!-- &#8209; is a non-breaking hyphen; not needed inside a <pre> block -->
<li>The <code>&#8209;<i>suffix</i></code> and its leading hyphen character are
only present in pre-release and release candidate version numbers, never in a
final official release version number.<br />

In between official releases, the <code>&#8209;<i>suffix</i></code> indicates
the status of the code and is one of <code>&#8209;dev</code> (development),
<code>&#8209;pre<i>n</i></code> (numbered pre-release) or
<code>&#8209;rc<i>n</i></code> (numbered release-candidate).</li>

</ul>

<p>When printing or discussing a particular version number, all the parts of
<code>4.<i>major</i>.<i>minor</i></code> SHOULD always be given. The
<code>.<i>bugfix</i></code> and/or <code>&#8209;<i>suffix</i></code> parts
SHOULD be included if they they are needed to indentify the specific version of
the software concerned.</p>

<p>The suffix <code>&#8209;BETA</code> that was included with some previous
release version numbers is confusing and MUST NOT be used in the future.</p>


<h3>Mercurial version tags</h3>

<p>Global version number tags created in mercurial repositories should take one
of these forms:</p>

<pre><i>major</i>.<i>minor</i>.<i>bugfix</i>
<i>major</i>.<i>minor</i>.<i>bugfix</i>-<i>suffix</i></pre>

<p>The leading <code>4.</code> from the official version number MUST NOT be
included in the tags created in module mercurial repositories, but the
<code>.<i>bugfix</i></code> part MUST always be present even when the number is
zero.</p>

<p>Tags MUST be created in the above format to mark each of the numbered
pre-release and release-candidate versions of each module, and to mark the final
official release (with no <code>&#8209;<i>suffix</i></code>).</p>


<h2>Release Compatibility</h2>

<p>There are two kinds of software compatibility, at the source-code level (API)
and the binary level (ABI). EPICS v4 releases will provide the following
compatibility promises across release boundaries:</p>

<h3>Major releases</h3>

<p>Neither ABI nor API compatibilty is promised through a major release.</p>

<p>Developers SHOULD list and describe all public API changes that have occurred
since the last major release in the Release Notes for the module, and MUST
provide full documentation for the new API (usually using Doxygen or JavaDoc).
If an API change requires significant changes to code that calls that API, an
example showing both before and after code should be provided in or linked from
the Release Notes. Code using the older API SHOULD NOT successfully compile
against the new API if it will not run properly without modification.</p>

<p>Any incompatible change to the pvAccess network protocol MUST trigger a major
release of the software.</p>

<h3>Minor releases</h3>

<p>Forward API compatibility is promised through a minor release but not ABI
compatibilty, meaning that software written against the old version MUST compile
and run against the new one without changing its source code; recompilation is
required though. Backward API compatibility is not promised, but where there
have not been any API changes an application written for a newer release SHOULD
compile and run successfully against an earlier minor release version.</p>

<p>Developers MUST consider these compatibility requirements during minor
release development. Tests SHOULD be written to check forward API compatibility
for all modules where public API changes are being made, ensuring that the older
methods and routines remain fully functional in the modified implementation.</p>

<h3>Bug-fix releases</h3>

<p>Other than changes required by the bug fix, both forward and backward
compatibility MUST be provided for both the API and ABI through a bugfix
release. For architectures that use shared libraries, it should only be
necessary to replace the original shared libraries with the new ones, without
recompiling any application that uses them. For architectures that statically
link libraries into binary executables the link step will have to be re-run,
although in this case it may be better to just rebuild the application
completely.</p>

<p>Developers MUST consider these compatibility requirements while fixing bugs,
and MUST NOT make any modifications to the names, call signatures or semantics
of public API routines or methods unless those changes are needed to bring the
implementation into line with the originally-published specification. If a bug
cannot be fixed without making such a change, the fix requires a new minor
release instead of a bug-fix release.</p>

<p class="caption">Note: EPICS v4 developers do not have much experience of
promising ABI compatibility. This policy may change after reviewing this
experience for a time.</p>


<h2>Release Process</h2>

<h3>Roles and responsibilities</h3>

<p>The following roles are used in the release process described below.
Individuals may take multiple roles as necessary.</p>

<ul>
<li>Release Coordinator (RC) &ndash; a project manager for the release</li>
<li>Module Owner (MO) &ndash; the proprietor of a one-person module</li>
<li>Module Developers (MDs) &ndash; everyone who works on the code</li>
<li>Module Packagers (MPs) &ndash; the individuals who make tar/jar files</li>
<li>Integration Testers (ITs) &ndash; for release quality assurance</li>
<li>Website Editor (WE) &ndash; the publicist and website manager</li>
</ul>

<h3>Release stages</h3>

<p>Software releases of operation-ready modules will go through all the stages
below. Software that is still undergoing development may skip the release
candidate stage and take a more liberal view of bug severity when taking the
final release decision.</p>


<h4>Release decision</h4>

<p>The working group or a designated Module Owner decides that a new version of
the software is to be released, what changes it should contain, and whether this
is to be a major, minor or bug-fix release. The release version number is
agreed, and a Release Coordinator is nominated to manage the release process
(where the software to be released has a single Module Owner they would normally
be expected to take on the role of the Release Coordinator). The dates for
feature freeze and/or the final release may be discussed, but the process of
finding and fixing bugs can easily thwart a specific final release deadline.</p>


<h4>Release planning</h4>

<p>In the period between the release decision and feature freeze, the Release
Coordinator studies the process and procedures described in this document, then
proposes any changes desired to the Working Group for agreement. In conjunction
with the Module Developers responsible for the software, the Release Coordinator
will fill in the tables below that give the timetable and checklists for the
remaining stages of the release process.</p>

<p>Module Developers should look for any remaining bugs that can/should be fixed
in this release, and provide feedback to the Release Coordinator about the
release timetable.</p>


<h4>Feature freeze</h4>

<p>Feature freeze occurs at a specific time and date and is thus an
instantaneous event, not a period of time. After that moment, the software is
said to have been frozen.</p>

<p>All development work on new features for this relese must have been completed
by the freeze date; incomplete features should have been backed out and no
additional feature branches should be merged afterwards. Only bug fixes and
documentation updates should normally be committed between the freeze and the
final release.</p>

<p>After the freeze there will be a delay (normally 2 weeks but this may vary)
before the first pre-release is made. Module Developers are expected to spend
this period completing the documentation and testing their software to identify
and fix any major bugs before the it gets published to a wider audience.</p>


<h4>Pre-releases</h4>

<p>These are tagged, built and/or packaged versions of the code created by the
Module Packager(s) that the Website Editor publishes as such for testing by the
wider EPICS developer community. The first pre-release version has the suffix
<code>&#8209;pre1</code> and subsequent pre-releases if any should be numbered
sequentially. Each pre-release version is normally left open for 2 weeks, and
any significant bugs discovered in this time can result in an additional
pre-release version being created after the bugs have been fixed.</p>

<p>Integration Testers will attempt to build and use the software in specific
environments according to its documentation, and will provide feedback and
bug-reports based on this experience.</p>

<p>Module Developers should continue to run tests on the software in unusual
configurations and on less common platforms during this period, and should also
read through and fix errors and omissions in the documentation.</p>


<h4>Release candidates</h4>

<p>Once the group believes the software to be free of major bugs and fully
documented, the Release Coordinator nominates the next version to be a release
candidate, the first of which is given the suffix <code>&#8209;rc1</code>. All
release candidate versions are publicized to the wider EPICS user community for
testing, and will normally be left open for 2 weeks.</p>

<p>If significant bugs are discovered they must be fixed, and the Module
Developers and Release Coordinator may then agree to publish another release
candidate version with those fixes, or may revert to a pre-release version to
ensure the bugs have been properly fixed.</p>


<h4>Final release</h4>

<p>Some time (usually 2 weeks) after a release candidate has been published with
no major bug reports for it in that period, the final release version will be
created and published. Minor bugs that have not been fixed should be documented
in a list of Known Problems that accompanies the release.</p>


<h2>Release Information and Checklists</h2>

<!-- The information and dates in this section will be modified by
  -- the Release Coordinator in preparation for each new release.
  -->

<h3>Specific Responsibilities</h3>

<dl>
<dt>Release Coordinator:</dt>
  <dd>Andrew Johnson</dd>
<dt>Module Packagers:</dt>
  <dd>Java Modules &ndash; Greg White<br />
    C++ Modules &ndash; David Hickin</dd>
<dt>Website Editor:</dt>
  <dd>Greg White</dd>
</dl>


<h3>Module versions covered</h3>

<table class="left">
<thead><tr>
  <th>Package & Version</th>
  <th>Module</th>
  <th>Module Version</th>
  <th>Module Owner</th>
  </tr></thead>

<tbody>

<tr>
  <td rowspan='4'>epicsJava 4.3.0</td>
  <td>pvDataJava</td>
  <td>3.0</td>
  <td>Marty Kraimer</td>
  </tr>
<tr>
  <td>pvAccessJava</td>
  <td>3.0</td>
  <td>Matej Sekoranja</td>
  </tr>
<tr>
  <td>exampleJava</td>
  <td>3.0</td>
  <td>Greg White</td>
  </tr>
<tr>
  <td>easyPVAJava</td>
  <td>0.1</td>
  <td>Matej Sekoranja</td>
  </tr>

<tr>
  <td rowspan='6'>epicsCPP 4.3.0</td>
  <td>pvCommonCPP</td>
  <td>3.0</td>
  <td>Matej Sekoranja</td>
  </tr>
<tr>
  <td>pvDataCPP</td>
  <td>3.0</td>
  <td>Marty Kraimer</td>
  </tr>
<tr>
  <td>pvAccessCPP</td>
  <td>3.0</td>
  <td>Matej Sekoranja</td>
  </tr>
<tr>
  <td>pvIOCCPP</td>
  <td>3.0</td>
  <td>Marty Kraimer</td>
  </tr>
<tr>
  <td>exampleCPP</td>
  <td>3.0</td>
  <td>David Hickin</td>
  </tr>
<tr>
  <td>pvaSrv</td>
  <td>0.9.1</td>
  <td>Ralph Lange</td>
  </tr>

</tbody>
</table>


<h3>Special instructions</h3>

<p>Develop and document these policies and procedures.</p>



<h3>Time-table</h3>

<table class="left">
<thead><tr>
  <th>Stage</th>
  <th>Earliest Date</th>
  <th>Length</th>
  </tr></thead>

<tbody>

<tr>
  <td>Feature freeze</td>
  <td>2013-07-05</td>
  <td>2 weeks</td>
  </tr>

<tr>
  <td>Pre-release 1</td>
  <td>2013-07-19</td>
  <td>2 weeks</td>
  </tr>

<tr>
  <td>Release Candidate</td>
  <td>2013-08-02</td>
  <td>2 weeks</td>
  </tr>

<tr>
  <td>Final Release</td>
  <td>2013-08-16</td>
  <th><!-- leave empty --></th>
  </tr>

</tbody>
</table>


<h3>Checklists</h3>

<h4>Release decision</h4>

<table class="left">
<thead><tr>
  <th>Completed</th>
  <th>Who</th>
  <th>Task Description</th>
  </tr></thead>

<tbody>

<tr>
  <td>2013-06-11</td>
  <td>WG</td>
  <td>Nominate a Release Coordinator for the release.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>WG/MO</td>
  <td>Agree which modules to include and their new version numbers.</td>
  </tr>

</tbody>
</table>

<h4>Release planning</h4>

<table class="left">
<thead><tr>
  <th>Completed</th>
  <th>Who</th>
  <th>Task Description</th>
  </tr></thead>

<tbody>

<tr>
  <td><!-- date --></td>
  <td>RC</td>
  <td>Edit this Release Guide document for the release. Discuss
    modifications to the process with WG and publish.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>RC</td>
  <td>Propose the date of Feature freeze. Adjust as necessary based on feedback
    from MDs.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>MPs</td>
  <td>Examine outstanding feature specifications and bug reports. With MDs
    decide which ones can/should be fixed in time for this release.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>RC</td>
  <td>Remind MDs of the up-coming Feature freeze and monitor progress.</td>
  </tr>

</tbody>
</table>

<h4>Features frozen</h4>

<table class="left">
<thead><tr>
  <th>Completed</th>
  <th>Who</th>
  <th>Task Description</th>
  </tr></thead>

<tbody>

<tr>
  <td><!-- date --></td>
  <td>RC</td>
  <td>Check repositories for missing documentation and release notes, ask MDs to
    correct any omissions and update any Getting Started documentation.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>MPs</td>
  <td>Examine the packaging instructions in this document and any supporting
    scripts in the pvDataWWW/scripts directory that are used for releasing the
    software. Modify them as necessary, commit your changes and push them to
    SourceForge.</td>

<tr>
  <td><!-- date --></td>
  <td>WE</td>
  <td>Create a new version-specific folder in the "Files" area of SourceForge
    for MPs to upload packaged files to. Edit the README file and copy it to
    that directory.</td>
  </tr>

</tbody>
</table>

<h4>Pre-releases</h4>

<table class="left">
<thead><tr>
  <th>Completed</th>
  <th>Who</th>
  <th>Task Description</th>
  </tr></thead>

<tbody>

<tr>
  <td><!-- date --></td>
  <td>RC</td>
  <td>Cue the MPs to start packaging the <code>&#8209;pre<i>n</i></code>
    release.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>MPs</td>
  <td>Follow the appropriate packaging instructions. Inform RC and WE when
    complete.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>WE</td>
  <td>Announce pre-release to WG and core-talk mailing lists and solicit testing
    and feedback.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>ITs</td>
  <td>Read documentation and use to build and test the software. Report bugs and
    provide other feedback as necessary.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>MDs</td>
  <td>Fix bugs and documentation as appropriate. Inform WG about any major
    issues that could affect the release timetable.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>RC</td>
  <td>At end of period, discuss state of release with WG, decide whether the
    next stage should be another pre-release or a release candidate.</td>
  </tr>

</tbody>
</table>

<h4>Release candidates</h4>

<table class="left">
<thead><tr>
  <th>Completed</th>
  <th>Who</th>
  <th>Task Description</th>
  </tr></thead>

<tbody>

<tr>
  <td><!-- date --></td>
  <td>RC</td>
  <td>Cue the MPs to start packaging the <code>&#8209;rc<i>n</i></code>
    release.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>MPs</td>
  <td>Follow the appropriate packaging instructions. Inform RC when and WE
    complete.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>WE</td>
  <td>Announce release candidate to tech-talk mailing list and solicit testing
    and feedback.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>MDs</td>
  <td>Help users who have questions while trying out the software.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>RC</td>
  <td>At end of period, discuss state of release with WG, decide whether the
    next stage should be a pre-release, another release candidate or the final
    release.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>WE</td>
  <td>Update the SourceForge Wiki page for the project.</td>
  </tr>

</tbody>
</table>

<h4>Final release</h4>

<table class="left">
<thead><tr>
  <th>Completed</th>
  <th>Who</th>
  <th>Task Description</th>
  </tr></thead>

<tbody>

<tr>
  <td><!-- date --></td>
  <td>RC</td>
  <td>Cue the MPs to start packaging the final release.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>MPs</td>
  <td>Follow the appropriate packaging instructions. Inform RC and WE when
    complete.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>WE</td>
  <td>Announce release to tech-talk mailing list. Make other website edits as
    appropriate.</td>
  </tr>

<tr>
  <td><!-- date --></td>
  <td>RC</td>
  <td>Complete and archive the Release Guide document for this release:
<pre>hg cp release.html release_4.3.0.html
hg ci release*.html
hg push</pre>
    </td>
  </tr>

</tbody>
</table>


<h2>Packaging Instructions</h2>

<p class="ed">Note: I have not checked or corrected these instructions or their
associated scripts &ndash; AJ</p>

<p>Release steps:</p>

<ol>
<li>Tag Mercurial repositories (currently pvData, pvAccess, pvIOC, pvService)</li>
<li>Clone tagged repositories to a build server (your local machine or Jenkins)</li>
<li>Generate release documentation and upload to sourceforge web area</li>
<li>Create release archives and upload to sourceforge file area</li>
</ol>

<p>Release scripts are in mercurial under <a
href="http://epics-pvdata.hg.sourceforge.net/hgweb/epics-pvdata/pvDataWWW/file/tip/scripts">pvDataWWW/scripts</a>.
</p>

<p>During the release process documentation (both written and generated) is copied from the <code>documentation</code> directory in each repository to <code>epics-pvdata.sourceforge.net/docbuild/$REPO/$TAGNAME/documentation</code>.
</p>

<h3>Packaging C++ Modules</h3>

<p>Several scripts are provided to automate the packaging process, which must be
edited to set the correct tag and user-name for the release.</p>

<dl>
  <dt>Code:</dt>
  <dd><a href="http://epics-pvdata.hg.sourceforge.net/hgweb/epics-pvdata/pvDataWWW/file/tip/scripts/tagtip.sh">tagtip.sh</a>
  &ndash; clones the repositories, tags the current head, then pushes the
  changes back to SF.</dd>

  <dd><a href="http://epics-pvdata.hg.sourceforge.net/hgweb/epics-pvdata/pvDataWWW/file/tip/scripts/makerelease.sh">makerelease.sh</a>
  &ndash; clones the tagged repositories, uses <code>hg archive</code> to
  combine the results into a new directory tree, adds the RELEASE.local file and
  a generated tag.txt file, generates a tar.gz file, then copies that to the
  file area.</dd>

  <dt>Documentation:</dt>
  <dd><a href="http://epics-pvdata.hg.sourceforge.net/hgweb/epics-pvdata/pvDataWWW/file/tip/scripts/syncdoxygen.sh">syncdoxygen.sh</a>
  &ndash; clones the tagged repositories, adds a copy of RELEASE.local and
  CONFIG_SITE.local to each, compiles each module and runs doxygen, then copies
  the generated documentation directories to the web area.</dd>

</dl>

<h3>Packaging Java Modules</h3>

<p class="ed">This text needs updating to the new version numbering above
&ndash; AJ</p>

<dl>
<dt>Code:</dt>

<dd>
<p>To make a versioned release of EPICS V4 core modules Java implementation:</p>
<p>Recall the build dependencies of the EPICS v4 core modules are:</p>
<ul>
<li>pvDataJava has no dependencies</li>
<li>pvAccessJava depends on pvDataJava</li>
<li>pvIOCJava depends on pvAaccessJava and pvDataJava for build</li>
<li>exampleJava depends on all 4 above.</li>
</ul>

<p>Edit each of the 5 pom.xml files 
pvIOCJava, pvAaccessJava and pvDataJava, pvServiceJava plus exampleJava, to change the version name.
Our naming convention is n.m-BETA (note caps) to designate a
BETA release, or later simply n.m. Intermediate snaphots are named
n.m-SNAPSHOT. Therefore, the first Beta is named 1.0-BETA:</p>
<pre>
Clone the repo, eg:

hg clone ssh://gregorywhite@epics-pvdata.hg.sourceforge.net/hgroot/epics-pvdata/pvDataJava

To tag and build for Java/Maven:

In pom.xml you have

<version>1.0-SNAPSHOT</version>

change to eg 1.0-BETA in top <version></version> and also in the dependencies, so you
build like versions against each other, starting with pvDataJava (that has no dependencies).

<version>1.0-BETA</version>
</pre>

<p>Build locally to test build and test suite.</p>
<pre>
% pwd
/Users/greg/Development/epicsV4/ev4hg

% cd pvDataJava
% mvn compile install

% cd ../pvAccessJava
% mvn compile install -Dmaven.test.skip=true

% cd ../pvIOCJava
% mvn compile install -DJAVAIOC=$PWD -Dmaven.test.skip=true

% cd ../exampleJava/
% mvn compile install 
</pre>
<p>Verify you got what you expected, you want the 3 core modules plus exampleJavas' jars:</p>
<pre>
% find ~/.m2 -name "pv*BETA.jar" -o -name "example*BETA.jar"
/Users/greg/.m2/repository/epics/exampleJava/1.0-BETA/exampleJava-1.0-BETA.jar
/Users/greg/.m2/repository/epics/pvAccess/1.0-BETA/pvAccess-1.0-BETA.jar
/Users/greg/.m2/repository/epics/pvData/1.0-BETA/pvData-1.0-BETA.jar
/Users/greg/.m2/repository/epics/pvIOC/1.0-BETA/pvIOC-1.0-BETA.jar
</pre>

<p>Upload the release. In each of the 4 directories, commit the pom.xml, tag the
repo, and push.</p>
<pre>
hg commit -m "beta 1 version inc" pom.xml

Then tag:

hg tag 1.0-BETA

and push:

hg push
</pre>

<p>This results in remote repository that is version tagged.
Now Jenkins will build 1.0-BETA version and deploy JARs in EPICS 4 remote maven
products directory (see below).

Before making any changes to the project (the best thing is to do it
immediately) you need to increase version to 1.1-SNAPSHOT. This way new changes will
not override the deployed 1.0-BETA. However, hold on a second Tex, it's a good idea
to versify that Jenkins has built and deployed the 1.0-BETA release jar file, before
pushing this new version, since this one will also result in a build and
deployment. Check the Maven build products directory <a
href="http://epics.sourceforge.net/maven2/epics/">http://epics.sourceforge.net/maven2/epics/</a>,
then:
</p>
<p>So, again in each of the 4 directories above, edit pom.xml and hg commit and push:</p>
<pre>
&lt;version&gt;1.1-SNAPSHOT&lt;/version&gt;

and

hg commit pom.xml
hg push
</pre>

<h4>Create the Source User downloadable tarball</h4>

<p>The download tarball is what we put in the SourceForge download files area, and
includes all the EPICS V4 jars just created, plus
associated source, XMLs, scripts etc needed by someone to get going. 
</p>

<p>The tarball includes the README file, so before creating it, edit
pvDataWWW/mainPage/README with details of the release, commit and push it. You
need to push it, because makereleaseJars.sh takes it from the web site.</p>

<p>Edit the pvDataWWW/scripts/makereleaseJars.sh file, updating the the TAG variable
in particular. cd to some directory where you're going
to build the tar, then run /makereleaseJars.sh from where you edited it:</p>
<pre>
% mkdir tmp
% cd tmp
% ../ev4hg/pvDataWWW/scripts/makereleaseJars.sh
</pre>
</dd>

<dt>Documentation:</dt>
<dd><a href="http://epics-pvdata.hg.sourceforge.net/hgweb/epics-pvdata/pvDataWWW/file/tip/scripts/syncjavadoc.sh">syncjavadoc.sh</a>
&ndash; clones the tagged repositoties, generates the JavaDoc, and synchronizes
to the web area. Check it builds the set of modules you want and then execute it
in a scratch area. You may want to comment out the rsync and do that by
hand.</dd>

</dl>

</div>

<hr>
<address>EPICS V4 Working Group</address>
<!-- hhmts start -->Last modified: Jul 3rd, 2013<!-- hhmts end -->
</body>
</html>
